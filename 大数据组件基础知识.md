# Redis

Redis（Remote Dictionary Server )，即远程字典服务，redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。

一种基于内存的kv键值对的缓存数据库，属于NOSQL

特点：应对高并发，高性能，在内存中，查询直接返回，在某些场景要明显快于MySQL，与MySQL常一同使用

Redis 数据类型

- String 字符串 
- List 可以重复的集合 
- Set 不可以重复的集合
- Hash 类似于 Map<String,String>
- Zser(sorted set) 带分数的 set

## 1. Redis 缓存穿透、缓存雪崩、缓存击穿

### 缓存穿透

指查询一个一定不存在的数据。由于缓存命不中时会去查询数据库， 查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，造成 缓存穿透。

解决方案：

1. 将空对象也缓存起来，并给它设置一个很短的过期时间，最长不超过 5 分钟。
2. 采用布隆过滤器，将所有可能存在的数据哈希到一个足够大的 bitmap 中，一个一定 不存在的数据会被这个 bitmap 拦截掉，从而避免了对底层存储系统的查询压力。

### 缓存雪崩

如果缓存集中在一段时间内失效，发生大量的缓存穿透，所有的查询都落在数据 库上，就会造成缓存雪崩。

解决方案：尽量让失效的时间点不分布在同一个时间点。

### 缓存击穿

缓存击穿，是指一个 key 非常热点，在不停的扛着大并发，当这个 key 在失效的 瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个屏障上凿开了一个洞

解决方案：可以设置 key 永不过期。也可以参照热数据导入Redis

## 2. 热数据通过什么样的方式导入 Redis

LRU（最近少用的淘汰）。即 Redis 的缓存每命中一次，就给命中的缓存增加一定 TTL（过期时间）（根据具体情 况来设定, 比如 10 分钟）。 一段时间后，热数据的 TTL 都会较大，不会自动失效，而冷数据基本上过了设定的 TTL 就马上失效了

## 3. Redis 的存储模式 RDB，AOF

